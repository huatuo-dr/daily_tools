# æœåŠ¡å™¨éƒ¨ç½²æŒ‡å— ğŸš€

ä½¿ç”¨è‡ªå·±çš„æœåŠ¡å™¨ï¼ˆè…¾è®¯äº‘/é˜¿é‡Œäº‘ç­‰ï¼‰éƒ¨ç½² daily_tools é¡¹ç›®ã€‚

> ğŸ“Œ **æœ¬æ–‡æ¡£åŸºäº Ubuntu 24.04 LTS ç¼–å†™**ï¼ŒåŒæ—¶å…¼å®¹ Ubuntu 22.04ã€Debian 12+ ç­‰ç³»ç»Ÿã€‚

---

## â“ ä¸ºä»€ä¹ˆä¸ç”¨ GitHub Pagesï¼Ÿ

### **æ ¸å¿ƒåŸå› ï¼šToken å®‰å…¨é—®é¢˜** ğŸ”’

GitHub Pages æ˜¯çº¯é™æ€ç½‘ç«™æ‰˜ç®¡æœåŠ¡ï¼Œ**æ‰€æœ‰ä»£ç ï¼ˆåŒ…æ‹¬ç¯å¢ƒå˜é‡ï¼‰éƒ½ä¼šæ‰“åŒ…åˆ° JavaScript æ–‡ä»¶ä¸­**ã€‚

#### âŒ GitHub Pages çš„é—®é¢˜

```javascript
// æ‰“åŒ…åçš„ JavaScript æ–‡ä»¶
const QWEATHER_API_KEY = "5d1ccfd8cdd148e498cc89cd8b1db587"  // â† ä»»ä½•äººéƒ½èƒ½çœ‹åˆ°ï¼
const COZE_TOKEN = "sat_a9qfw2..."  // â† å®Œå…¨æš´éœ²ï¼
```

**é£é™©ï¼š**
- âŒ ä»»ä½•äººéƒ½å¯ä»¥åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­çœ‹åˆ°ä½ çš„ API Key
- âŒ å¯èƒ½è¢«æ»¥ç”¨ï¼Œæ¶ˆè€—ä½ çš„ API é…é¢
- âŒ å­˜åœ¨å®‰å…¨éšæ‚£ï¼Œæ— æ³•çœŸæ­£ä¿æŠ¤

#### âœ… è‡ªå·±æœåŠ¡å™¨çš„ä¼˜åŠ¿

- âœ… **Token 100% å®‰å…¨**ï¼šå­˜å‚¨åœ¨æœåŠ¡å™¨ç¯å¢ƒå˜é‡ä¸­ï¼Œä¸ä¼šæš´éœ²
- âœ… **å®Œå…¨æ§åˆ¶**ï¼šéšæ—¶æ›´æ–°ã€é‡å¯ã€ç›‘æ§
- âœ… **é«˜æ€§èƒ½**ï¼šä¸“å±èµ„æºï¼Œè®¿é—®é€Ÿåº¦å¿«
- âœ… **æ”¯æŒåŸŸå + HTTPS**ï¼šä¸“ä¸šçš„è®¿é—®ä½“éªŒ
- âœ… **æ— é¢å¤–è´¹ç”¨**ï¼šä½¿ç”¨å·²æœ‰æœåŠ¡å™¨å³å¯

#### ğŸ’¡ å…¶ä»–æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | Token å®‰å…¨ | æˆæœ¬ | æ§åˆ¶æƒ | æ¨èåº¦ |
|------|-----------|------|--------|--------|
| **è‡ªå·±çš„æœåŠ¡å™¨** | âœ… 100% å®‰å…¨ | å·²æœ‰æœåŠ¡å™¨å…è´¹ | âœ… å®Œå…¨æ§åˆ¶ | â­â­â­â­â­ |
| GitHub Pages | âŒ å®Œå…¨æš´éœ² | å…è´¹ | âŒ æ— æ§åˆ¶ | âŒ |
| Vercel/Netlify | âš ï¸ å‰ç«¯ä»æš´éœ² | å…è´¹é¢åº¦ | âš ï¸ éƒ¨åˆ†æ§åˆ¶ | â­â­ |
| åç«¯ä»£ç†æ–¹æ¡ˆ | âœ… å®‰å…¨ | å¯èƒ½æ”¶è´¹ | âœ… å®Œå…¨æ§åˆ¶ | â­â­â­â­ |

**ç»“è®ºï¼šå¯¹äºéœ€è¦ API Token çš„é¡¹ç›®ï¼Œä½¿ç”¨è‡ªå·±çš„æœåŠ¡å™¨æ˜¯æœ€ä½³é€‰æ‹©ï¼**

---

## ğŸ¯ æœåŠ¡å™¨éƒ¨ç½²ä¼˜åŠ¿

âœ… **å®Œå…¨å®‰å…¨**ï¼šToken å­˜å‚¨åœ¨ä½ çš„ç§æœ‰æœåŠ¡å™¨  
âœ… **å®Œå…¨æ§åˆ¶**ï¼šéšæ—¶æ›´æ–°ã€é‡å¯  
âœ… **é«˜æ€§èƒ½**ï¼šä¸“å±èµ„æº  
âœ… **å¯é…åŸŸå**ï¼šç»‘å®šè‡ªå·±çš„åŸŸå  
âœ… **å…è´¹**ï¼šæ— é¢å¤–è´¹ç”¨ï¼ˆæœåŠ¡å™¨å·²æœ‰ï¼‰

---

## ğŸ“‹ å‡†å¤‡å·¥ä½œ

### 1. æœåŠ¡å™¨åŸºæœ¬ä¿¡æ¯

ç¡®è®¤ä½ çš„æœåŠ¡å™¨ä¿¡æ¯ï¼š
```bash
# æ“ä½œç³»ç»Ÿï¼ˆæœ¬æ–‡æ¡£åŸºäº Ubuntu 24.04 LTSï¼‰
cat /etc/os-release

# æœåŠ¡å™¨ IP åœ°å€
curl ifconfig.me
```

**ç³»ç»Ÿè¦æ±‚ï¼š**
- âœ… Ubuntu 24.04 LTSï¼ˆæ¨èï¼‰
- âœ… Ubuntu 22.04 LTS
- âœ… Debian 12+
- âœ… CentOS 8+

### 2. å®‰å…¨ç»„é…ç½®

åœ¨è…¾è®¯äº‘æ§åˆ¶å°é…ç½®å®‰å…¨ç»„è§„åˆ™ï¼š
- **å…¥ç«™è§„åˆ™**ï¼šå¼€æ”¾ç«¯å£ `80`ï¼ˆHTTPï¼‰å’Œ `443`ï¼ˆHTTPSï¼‰
- **å‡ºç«™è§„åˆ™**ï¼šå…è®¸æ‰€æœ‰

---

## ğŸš€ éƒ¨ç½²æ–¹æ¡ˆé€‰æ‹©

æ¨èä¸¤ç§æ–¹æ¡ˆï¼ŒæŒ‰éœ€é€‰æ‹©ï¼š

| æ–¹æ¡ˆ | éš¾åº¦ | éƒ¨ç½²æ—¶é—´ | æ¨èåº¦ | è¯´æ˜ |
|------|------|---------|--------|------|
| **æ–¹æ¡ˆAï¼šDocker éƒ¨ç½²** | â­â­ | 10 åˆ†é’Ÿ | â­â­â­â­â­ | ç¯å¢ƒéš”ç¦»ã€ä¸€é”®å¯åœã€è‡ªåŠ¨é‡å¯ |
| **æ–¹æ¡ˆBï¼šç›´æ¥éƒ¨ç½²** | â­â­â­ | 15 åˆ†é’Ÿ | â­â­â­â­ | æ›´çµæ´»ã€èµ„æºå ç”¨å°‘ |

**å»ºè®®ï¼šä¼˜å…ˆé€‰æ‹© Docker éƒ¨ç½²ï¼Œæ›´ç®€å•å¯é ï¼**

---

## ğŸ³ æ–¹æ¡ˆAï¼šDocker éƒ¨ç½² â­æ¨è

### ä¸ºä»€ä¹ˆé€‰æ‹© Dockerï¼Ÿ

- âœ… **ç¯å¢ƒéš”ç¦»**ï¼šä¸å½±å“ç³»ç»Ÿå…¶ä»–æœåŠ¡
- âœ… **ä¸€é”®æ“ä½œ**ï¼šå¯åŠ¨/åœæ­¢/é‡å¯éƒ½å¾ˆç®€å•
- âœ… **æ˜“äºè¿ç§»**ï¼šå¯è½»æ¾è¿ç§»åˆ°å…¶ä»–æœåŠ¡å™¨
- âœ… **è‡ªåŠ¨é‡å¯**ï¼šæœåŠ¡å™¨é‡å¯åè‡ªåŠ¨è¿è¡Œ
- âœ… **æ ‡å‡†åŒ–**ï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒä¸€è‡´

### âš¡ å¿«é€Ÿéƒ¨ç½²ï¼ˆ10åˆ†é’Ÿï¼‰

æŒ‰é¡ºåºæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

#### 1ï¸âƒ£ å®‰è£… Docker

**Ubuntu 24.04 æ¨èæ–¹å¼ï¼š**

```bash
# æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# å®‰è£…å¿…è¦çš„ä¾èµ–
sudo apt install -y ca-certificates curl gnupg

# æ·»åŠ  Docker å®˜æ–¹ GPG å¯†é’¥
sudo install -m 0755 -d /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
sudo chmod a+r /etc/apt/keyrings/docker.gpg

# æ·»åŠ  Docker ä»“åº“
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
  $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# å®‰è£… Docker
sudo apt update
sudo apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin

# å¯åŠ¨ Docker
sudo systemctl start docker
sudo systemctl enable docker

# å°†å½“å‰ç”¨æˆ·æ·»åŠ åˆ° docker ç»„ï¼ˆå¯é€‰ï¼Œé¿å…æ¯æ¬¡ sudoï¼‰
sudo usermod -aG docker $USER

# éªŒè¯å®‰è£…
docker --version
docker compose version
```

**ğŸš€ é…ç½® Docker å›½å†…é•œåƒæºï¼ˆé‡è¦ï¼ï¼‰**

ç”±äºç½‘ç»œåŸå› ï¼Œæ‹‰å– Docker é•œåƒå¯èƒ½å¾ˆæ…¢æˆ–è¶…æ—¶ï¼Œé…ç½®é•œåƒåŠ é€Ÿå™¨ï¼š

```bash
# åˆ›å»ºé…ç½®ç›®å½•
sudo mkdir -p /etc/docker

# é…ç½®å¤šä¸ªé•œåƒæºï¼ˆæé«˜æˆåŠŸç‡ï¼‰
sudo tee /etc/docker/daemon.json <<-'EOF'
{
  "registry-mirrors": [
    "https://docker.m.daocloud.io",
    "https://docker.1panel.live",
    "https://dockerpull.org",
    "https://dockerhub.icu",
    "https://docker.awsl9527.cn"
  ]
}
EOF

# é‡å¯ Docker ä½¿é…ç½®ç”Ÿæ•ˆ
sudo systemctl daemon-reload
sudo systemctl restart docker

# éªŒè¯é…ç½®ï¼ˆå¯é€‰ï¼‰
docker info | grep -A 5 "Registry Mirrors"
```

**æˆ–ä½¿ç”¨å¿«æ·è„šæœ¬ï¼ˆé€‚ç”¨äºæµ‹è¯•ç¯å¢ƒï¼‰ï¼š**

```bash
# ä¸€é”®å®‰è£…ï¼ˆå®˜æ–¹è„šæœ¬ï¼‰
curl -fsSL https://get.docker.com | sh

# å¯åŠ¨ Docker
sudo systemctl start docker
sudo systemctl enable docker

# éªŒè¯å®‰è£…
docker --version

# âš ï¸ è®°å¾—é…ç½®é•œåƒæºï¼ˆå‚è€ƒä¸Šé¢çš„æ­¥éª¤ï¼‰
```

**å…¶ä»–ç³»ç»Ÿï¼š**

```bash
# CentOS/RHEL
sudo yum install -y docker
sudo systemctl start docker
sudo systemctl enable docker
```

#### 2ï¸âƒ£ å…‹éš†é¡¹ç›®

```bash
# å®‰è£… Gitï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
sudo apt install -y git

# å…‹éš†é¡¹ç›®åˆ°æœåŠ¡å™¨
cd /opt
sudo git clone https://github.com/ä½ çš„ç”¨æˆ·å/daily_tools.git

# ä¿®æ”¹æ‰€æœ‰æƒ
sudo chown -R $USER:$USER daily_tools
cd daily_tools
```

#### 3ï¸âƒ£ é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env.local

# ç¼–è¾‘ç¯å¢ƒå˜é‡ï¼ˆä½¿ç”¨ nano æˆ– vimï¼‰
nano .env.local
```

**å¡«å…¥ä½ çš„é…ç½®ï¼š**

```bash
# å’Œé£å¤©æ°”é…ç½®
VITE_QWEATHER_API_KEY=ä½ çš„å’Œé£å¤©æ°”APIKey
VITE_QWEATHER_CUSTOM_HOST=mp3jpga2tc.re.qweatherapi.com
VITE_QWEATHER_API_TYPE=devapi

# Coze é…ç½®
VITE_COZE_API_TOKEN=ä½ çš„Coze_Token
VITE_COZE_BOT_ID=ä½ çš„Bot_ID
VITE_COZE_USER_ID=ä½ çš„User_ID
VITE_COZE_BASE_URL=https://api.coze.cn
```

**ä¿å­˜å¹¶é€€å‡ºï¼š**
- nano: `Ctrl + X`ï¼Œç„¶åæŒ‰ `Y`ï¼Œå†æŒ‰ `Enter`
- vim: æŒ‰ `ESC`ï¼Œè¾“å…¥ `:wq`ï¼ŒæŒ‰ `Enter`

#### 4ï¸âƒ£ åˆ›å»ºéƒ¨ç½²æ–‡ä»¶

**åˆ›å»º Dockerfileï¼š**

```bash
cat > Dockerfile <<'EOF'
FROM node:20-alpine

WORKDIR /app

COPY package*.json ./
RUN npm ci --omit=dev

COPY . .
RUN npm run build

RUN npm install -g serve

EXPOSE 3001

CMD ["serve", "-s", "dist", "-l", "3001"]
EOF
```

**åˆ›å»º docker-compose.ymlï¼š**

```bash
cat > docker-compose.yml <<'EOF'
services:
  daily-tools:
    build: .
    container_name: daily-tools
    restart: unless-stopped
    ports:
      - "3001:3001"
    env_file:
      - .env.local
    environment:
      - NODE_ENV=production
EOF
```

#### 5ï¸âƒ£ å¯åŠ¨åº”ç”¨

```bash
# æ„å»ºå¹¶å¯åŠ¨ï¼ˆé¦–æ¬¡å¯åŠ¨éœ€è¦å‡ åˆ†é’Ÿæ„å»ºé•œåƒï¼‰
docker compose up -d

# æŸ¥çœ‹å¯åŠ¨æ—¥å¿—
docker compose logs -f
# çœ‹åˆ° "Accepting connections" è¡¨ç¤ºå¯åŠ¨æˆåŠŸï¼ŒæŒ‰ Ctrl+C é€€å‡ºæ—¥å¿—æŸ¥çœ‹
```

#### 6ï¸âƒ£ éªŒè¯éƒ¨ç½²

```bash
# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker compose ps
# åº”è¯¥æ˜¾ç¤º "Up" çŠ¶æ€

# æµ‹è¯•è®¿é—®
curl http://localhost:3001

# ğŸ‰ åœ¨æµè§ˆå™¨è®¿é—®
# http://ä½ çš„æœåŠ¡å™¨IP:3001
```

**éƒ¨ç½²æˆåŠŸï¼** âœ…

---

## ğŸ“¦ æ–¹æ¡ˆBï¼šç›´æ¥éƒ¨ç½²ï¼ˆä¸ä½¿ç”¨ Dockerï¼‰

### é€‚ç”¨åœºæ™¯

- âœ… ä¸æƒ³å®‰è£… Docker
- âœ… éœ€è¦æ›´çµæ´»çš„æ§åˆ¶
- âœ… æœåŠ¡å™¨èµ„æºæœ‰é™

### âš¡ å¿«é€Ÿéƒ¨ç½²ï¼ˆ15åˆ†é’Ÿï¼‰

#### 1ï¸âƒ£ å®‰è£… Node.js

**Ubuntu 24.04 æ¨èæ–¹å¼ï¼š**

```bash
# æ–¹æ³•1ï¼šä½¿ç”¨ NodeSource å®˜æ–¹ä»“åº“ï¼ˆæ¨èï¼‰
# å®‰è£… Node.js 20.x LTS
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs

# æ–¹æ³•2ï¼šä½¿ç”¨ NVMï¼ˆæ›´çµæ´»ï¼Œå¯ç®¡ç†å¤šä¸ªç‰ˆæœ¬ï¼‰
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
source ~/.bashrc
nvm install 20
nvm use 20
nvm alias default 20

# éªŒè¯å®‰è£…
node --version  # åº”è¯¥æ˜¯ v20.x
npm --version   # åº”è¯¥æ˜¯ 10.x+
```

**å…¶ä»–ç³»ç»Ÿï¼š**

```bash
# CentOS/RHEL
curl -fsSL https://rpm.nodesource.com/setup_20.x | sudo bash -
sudo yum install -y nodejs
```

**Ubuntu 24.04 æ³¨æ„äº‹é¡¹ï¼š**
- âœ… Ubuntu 24.04 å¯¹ Node.js 20+ æ”¯æŒè‰¯å¥½
- âœ… å¦‚æœç³»ç»Ÿè‡ªå¸¦ Node.jsï¼Œå»ºè®®ä½¿ç”¨ NodeSource ç‰ˆæœ¬è·å¾—æœ€æ–°ç‰¹æ€§

#### 2ï¸âƒ£ å…‹éš†é¡¹ç›®

```bash
# å®‰è£… Git
sudo apt install -y git

# å…‹éš†é¡¹ç›®
cd /opt
sudo git clone https://github.com/ä½ çš„ç”¨æˆ·å/daily_tools.git
sudo chown -R $USER:$USER daily_tools
cd daily_tools
```

#### 3ï¸âƒ£ é…ç½®ç¯å¢ƒå˜é‡

```bash
cp .env.example .env.local
nano .env.local  # å¡«å…¥ä½ çš„ API Key å’Œ Token
```

#### 4ï¸âƒ£ å®‰è£…ä¾èµ–å¹¶æ„å»º

```bash
# å®‰è£…é¡¹ç›®ä¾èµ–
npm install

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build
```

#### 5ï¸âƒ£ å®‰è£…è¿›ç¨‹ç®¡ç†å™¨

```bash
# å®‰è£… PM2ï¼ˆè¿›ç¨‹ç®¡ç†å™¨ï¼‰å’Œ serveï¼ˆé™æ€æ–‡ä»¶æœåŠ¡å™¨ï¼‰
sudo npm install -g pm2 serve
```

#### 6ï¸âƒ£ å¯åŠ¨åº”ç”¨

```bash
# ä½¿ç”¨ PM2 å¯åŠ¨åº”ç”¨
pm2 start serve --name daily-tools -- -s dist -l 3001

# ä¿å­˜ PM2 é…ç½®
pm2 save

# è®¾ç½®å¼€æœºè‡ªå¯
pm2 startup
# âš ï¸ æ‰§è¡Œä¸Šé¢å‘½ä»¤è¾“å‡ºçš„å‘½ä»¤ï¼ˆå¤åˆ¶ç²˜è´´æ‰§è¡Œï¼‰
```

#### 7ï¸âƒ£ éªŒè¯éƒ¨ç½²

```bash
# æŸ¥çœ‹åº”ç”¨çŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs daily-tools

# æµ‹è¯•è®¿é—®
curl http://localhost:3001

# ğŸ‰ åœ¨æµè§ˆå™¨è®¿é—®
# http://ä½ çš„æœåŠ¡å™¨IP:3001
```

**éƒ¨ç½²æˆåŠŸï¼** âœ…

### PM2 å¸¸ç”¨å‘½ä»¤

```bash
pm2 status              # æŸ¥çœ‹æ‰€æœ‰åº”ç”¨çŠ¶æ€
pm2 logs daily-tools    # æŸ¥çœ‹æ—¥å¿—
pm2 restart daily-tools # é‡å¯åº”ç”¨
pm2 stop daily-tools    # åœæ­¢åº”ç”¨
pm2 delete daily-tools  # åˆ é™¤åº”ç”¨
```

---

## ğŸŒ é…ç½® Nginx åå‘ä»£ç†ï¼ˆæ¨èï¼‰

ä½¿ç”¨ Nginx å¯ä»¥ï¼š
- âœ… æ”¯æŒ HTTPS
- âœ… æ”¯æŒåŸŸåè®¿é—®
- âœ… æ›´å¥½çš„æ€§èƒ½
- âœ… é™æ€æ–‡ä»¶ç¼“å­˜

### 1ï¸âƒ£ å®‰è£… Nginx

**Ubuntu 24.04ï¼š**

```bash
# æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨
sudo apt update

# å®‰è£… Nginx
sudo apt install -y nginx

# å¯åŠ¨å¹¶è®¾ç½®å¼€æœºè‡ªå¯
sudo systemctl start nginx
sudo systemctl enable nginx

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status nginx

# æ£€æŸ¥ Nginx ç‰ˆæœ¬
nginx -v
```

**Ubuntu 24.04 é»˜è®¤å®‰è£…çš„æ˜¯ Nginx 1.24+ï¼Œæ€§èƒ½å’Œå®‰å…¨æ€§éƒ½å¾ˆå¥½ã€‚**

**å…¶ä»–ç³»ç»Ÿï¼š**

```bash
# CentOS/RHEL
sudo yum install -y nginx
sudo systemctl start nginx
sudo systemctl enable nginx
```

### 2ï¸âƒ£ é…ç½® Nginx

```bash
# åˆ›å»ºé…ç½®æ–‡ä»¶
sudo vim /etc/nginx/sites-available/daily-tools
```

æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```nginx
server {
    listen 80;
    server_name ä½ çš„åŸŸå.com;  # æˆ–è€…ä½¿ç”¨ IP åœ°å€

    # è®¿é—®æ—¥å¿—
    access_log /var/log/nginx/daily-tools-access.log;
    error_log /var/log/nginx/daily-tools-error.log;

    # åå‘ä»£ç†åˆ° Node.js åº”ç”¨
    location / {
        proxy_pass http://localhost:3001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }

    # é™æ€æ–‡ä»¶ç¼“å­˜ï¼ˆå¯é€‰ï¼‰
    location ~* \.(jpg|jpeg|png|gif|ico|css|js|svg|woff|woff2|ttf)$ {
        proxy_pass http://localhost:3001;
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

### 3ï¸âƒ£ å¯ç”¨é…ç½®

```bash
# åˆ›å»ºè½¯é“¾æ¥ï¼ˆUbuntu/Debianï¼‰
sudo ln -s /etc/nginx/sites-available/daily-tools /etc/nginx/sites-enabled/

# æµ‹è¯•é…ç½®
sudo nginx -t

# é‡å¯ Nginx
sudo systemctl restart nginx
```

### 4ï¸âƒ£ è®¿é—®åº”ç”¨

```
http://ä½ çš„åŸŸå.com
# æˆ–
http://ä½ çš„æœåŠ¡å™¨IP
```

---

## ğŸ”’ é…ç½® HTTPSï¼ˆæ¨èï¼‰

ä½¿ç”¨ Let's Encrypt å…è´¹ SSL è¯ä¹¦

### 1ï¸âƒ£ å®‰è£… Certbot

**Ubuntu 24.04ï¼š**

```bash
# Ubuntu 24.04 æ¨èä½¿ç”¨ snap å®‰è£…ï¼ˆå®˜æ–¹æ¨èï¼‰
sudo apt update
sudo apt install -y snapd
sudo snap install core
sudo snap refresh core

# å®‰è£… Certbot
sudo snap install --classic certbot

# åˆ›å»ºè½¯é“¾æ¥
sudo ln -s /snap/bin/certbot /usr/bin/certbot

# éªŒè¯å®‰è£…
certbot --version
```

**ä¼ ç»Ÿæ–¹å¼ï¼ˆä¹Ÿæ”¯æŒï¼‰ï¼š**

```bash
# ä½¿ç”¨ apt å®‰è£…
sudo apt install -y certbot python3-certbot-nginx
```

**å…¶ä»–ç³»ç»Ÿï¼š**

```bash
# CentOS/RHEL
sudo yum install -y certbot python3-certbot-nginx
```

### 2ï¸âƒ£ ç”³è¯·è¯ä¹¦

```bash
# è‡ªåŠ¨é…ç½® HTTPS
sudo certbot --nginx -d ä½ çš„åŸŸå.com

# æŒ‰æç¤ºè¾“å…¥é‚®ç®±å¹¶åŒæ„åè®®
```

### 3ï¸âƒ£ è‡ªåŠ¨ç»­æœŸ

```bash
# æµ‹è¯•è‡ªåŠ¨ç»­æœŸ
sudo certbot renew --dry-run

# Certbot ä¼šè‡ªåŠ¨æ·»åŠ å®šæ—¶ä»»åŠ¡ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®
```

### 4ï¸âƒ£ è®¿é—®åº”ç”¨

```
https://ä½ çš„åŸŸå.com  âœ… å®‰å…¨è®¿é—®
```

---

## ğŸ”„ æ›´æ–°éƒ¨ç½²

### æ–¹æ¡ˆAï¼ˆDockerï¼‰æ›´æ–°

```bash
cd /opt/daily_tools

# æ‹‰å–æœ€æ–°ä»£ç 
git pull

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
docker-compose down
docker-compose up -d --build

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

### æ–¹æ¡ˆBï¼ˆPM2ï¼‰æ›´æ–°

```bash
cd /opt/daily_tools

# æ‹‰å–æœ€æ–°ä»£ç 
git pull

# é‡æ–°æ„å»º
npm run build

# é‡å¯åº”ç”¨
pm2 restart daily-tools
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### 0. Docker Hub è¿æ¥è¶…æ—¶ â­ å¸¸è§

**é”™è¯¯ä¿¡æ¯ï¼š**
```
failed to solve: node:20-alpine: failed to resolve source metadata
dial tcp xxx:443: i/o timeout
```

**åŸå› **ï¼šå›½å†…ç½‘ç»œè®¿é—® Docker Hub ä¸ç¨³å®š

**è§£å†³æ–¹æ³•ï¼š**
```bash
# æ–¹æ³•1ï¼šé…ç½®é•œåƒåŠ é€Ÿå™¨ï¼ˆæ¨èï¼‰
sudo tee /etc/docker/daemon.json <<-'EOF'
{
  "registry-mirrors": [
    "https://docker.m.daocloud.io",
    "https://docker.1panel.live",
    "https://dockerpull.org",
    "https://dockerhub.icu",
    "https://docker.awsl9527.cn"
  ]
}
EOF

sudo systemctl daemon-reload
sudo systemctl restart docker

# æ–¹æ³•2ï¼šæ‰‹åŠ¨æ‹‰å–é•œåƒ
docker pull m.daocloud.io/library/node:20-alpine
docker tag m.daocloud.io/library/node:20-alpine node:20-alpine

# é‡æ–°æ„å»º
docker compose up -d
```

### 1. ç«¯å£è¢«å ç”¨

```bash
# æŸ¥çœ‹ 3001 ç«¯å£å ç”¨
sudo netstat -tlnp | grep 3001

# æˆ–
sudo lsof -i :3001

# æ€æ‰å ç”¨è¿›ç¨‹
sudo kill -9 è¿›ç¨‹PID
```

### 2. é˜²ç«å¢™é—®é¢˜

**Ubuntu 24.04ï¼ˆUFWï¼‰ï¼š**

```bash
# æ£€æŸ¥é˜²ç«å¢™çŠ¶æ€
sudo ufw status

# å¦‚æœé˜²ç«å¢™æœªå¯ç”¨ï¼Œå…ˆé…ç½®è§„åˆ™å†å¯ç”¨
sudo ufw allow 22/tcp    # SSHï¼ˆé‡è¦ï¼å…ˆå…è®¸ SSH é¿å…è¢«é”åœ¨å¤–é¢ï¼‰
sudo ufw allow 80/tcp    # HTTP
sudo ufw allow 443/tcp   # HTTPS
sudo ufw allow 3001/tcp  # Node.js åº”ç”¨ï¼ˆå¯é€‰ï¼Œå¦‚æœä¸ç”¨ Nginx åå‘ä»£ç†ï¼‰

# å¯ç”¨é˜²ç«å¢™
sudo ufw enable

# æŸ¥çœ‹è¯¦ç»†è§„åˆ™
sudo ufw status verbose
```

**âš ï¸ é‡è¦æç¤ºï¼š**
- åœ¨å¯ç”¨ UFW ä¹‹å‰ï¼ŒåŠ¡å¿…å…ˆå…è®¸ SSH ç«¯å£ï¼ˆé€šå¸¸æ˜¯ 22ï¼‰ï¼Œå¦åˆ™å¯èƒ½è¢«é”åœ¨æœåŠ¡å™¨å¤–é¢ï¼
- Ubuntu 24.04 é»˜è®¤æœªå¯ç”¨ UFWï¼Œéœ€è¦æ‰‹åŠ¨é…ç½®

**å…¶ä»–ç³»ç»Ÿï¼š**

```bash
# CentOS/RHELï¼ˆfirewalldï¼‰
sudo firewall-cmd --permanent --add-port=80/tcp
sudo firewall-cmd --permanent --add-port=443/tcp
sudo firewall-cmd --reload
```

### 3. æŸ¥çœ‹åº”ç”¨æ—¥å¿—

```bash
# Docker æ–¹å¼
docker-compose logs -f

# PM2 æ–¹å¼
pm2 logs daily-tools

# Nginx æ—¥å¿—
sudo tail -f /var/log/nginx/daily-tools-access.log
sudo tail -f /var/log/nginx/daily-tools-error.log
```

### 4. æ£€æŸ¥ç¯å¢ƒå˜é‡

```bash
# ç¡®è®¤ .env.local æ˜¯å¦å­˜åœ¨
ls -la .env.local

# æŸ¥çœ‹å†…å®¹ï¼ˆæ³¨æ„æ•æ„Ÿä¿¡æ¯ï¼‰
cat .env.local
```

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–ï¼ˆå¯é€‰ï¼‰

### 1. Nginx Gzip å‹ç¼©

åœ¨ Nginx é…ç½®ä¸­æ·»åŠ ï¼š

```nginx
# åœ¨ http æˆ– server å—ä¸­
gzip on;
gzip_vary on;
gzip_min_length 1024;
gzip_types text/plain text/css text/xml text/javascript 
           application/x-javascript application/xml+rss 
           application/javascript application/json;
```

### 2. å¼€å¯ HTTP/2

```nginx
# ä¿®æ”¹ listen æŒ‡ä»¤
listen 443 ssl http2;
```

---

## ğŸ” å®‰å…¨å»ºè®®

### 1. ä¿®æ”¹ SSH ç«¯å£

```bash
sudo vim /etc/ssh/sshd_config
# ä¿®æ”¹ Port 22 ä¸ºå…¶ä»–ç«¯å£
sudo systemctl restart sshd
```

### 2. é…ç½®é˜²ç«å¢™

```bash
# åªå¼€æ”¾å¿…è¦ç«¯å£
sudo ufw default deny incoming
sudo ufw default allow outgoing
sudo ufw allow 22/tcp    # SSH
sudo ufw allow 80/tcp    # HTTP
sudo ufw allow 443/tcp   # HTTPS
sudo ufw enable
```

### 3. å®šæœŸæ›´æ–°ç³»ç»Ÿ

**Ubuntu 24.04ï¼š**

```bash
# æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨
sudo apt update

# å‡çº§æ‰€æœ‰è½¯ä»¶åŒ…
sudo apt upgrade -y

# è‡ªåŠ¨ç§»é™¤ä¸å†éœ€è¦çš„åŒ…
sudo apt autoremove -y

# æ¸…ç†ç¼“å­˜
sudo apt autoclean

# æŸ¥çœ‹å¯å‡çº§çš„åŒ…
apt list --upgradable
```

**å¯ç”¨è‡ªåŠ¨å®‰å…¨æ›´æ–°ï¼ˆæ¨èï¼‰ï¼š**

```bash
# å®‰è£… unattended-upgrades
sudo apt install -y unattended-upgrades

# å¯ç”¨è‡ªåŠ¨æ›´æ–°
sudo dpkg-reconfigure -plow unattended-upgrades
```

**å…¶ä»–ç³»ç»Ÿï¼š**

```bash
# CentOS/RHEL
sudo yum update -y
```

---

## ğŸ“ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# Docker æ–¹å¼
docker-compose up -d           # å¯åŠ¨
docker-compose down            # åœæ­¢
docker-compose restart         # é‡å¯
docker-compose logs -f         # æŸ¥çœ‹æ—¥å¿—

# PM2 æ–¹å¼
pm2 start daily-tools          # å¯åŠ¨
pm2 stop daily-tools           # åœæ­¢
pm2 restart daily-tools        # é‡å¯
pm2 logs daily-tools           # æŸ¥çœ‹æ—¥å¿—

# Nginx
sudo systemctl status nginx    # æŸ¥çœ‹çŠ¶æ€
sudo systemctl restart nginx   # é‡å¯
sudo nginx -t                  # æµ‹è¯•é…ç½®
```

---

## âœ… éƒ¨ç½²æ£€æŸ¥æ¸…å•

éƒ¨ç½²å®Œæˆåï¼Œæ£€æŸ¥ä»¥ä¸‹é¡¹ç›®ï¼š

- [ ] åº”ç”¨å¯ä»¥æ­£å¸¸è®¿é—®
- [ ] å¤©æ°”åŠŸèƒ½æ­£å¸¸ï¼ˆçœŸå®æ•°æ®ï¼‰
- [ ] å‘½ä»¤ç¿»è¯‘åŠŸèƒ½æ­£å¸¸
- [ ] æ‰€æœ‰å·¥å…·ï¼ˆè®¡ç®—å™¨ã€å­—ç¬¦ä¸²å¤„ç†ç­‰ï¼‰æ­£å¸¸
- [ ] HTTPS è¯ä¹¦æ­£å¸¸ï¼ˆå¦‚æœé…ç½®ï¼‰
- [ ] åº”ç”¨å¼€æœºè‡ªå¯
- [ ] æ—¥å¿—æ­£å¸¸è®°å½•
- [ ] é˜²ç«å¢™é…ç½®æ­£ç¡®

---

## ğŸ‰ éƒ¨ç½²å®Œæˆï¼

è®¿é—®ä½ çš„åº”ç”¨ï¼š
- HTTP: `http://ä½ çš„æœåŠ¡å™¨IP` æˆ– `http://ä½ çš„åŸŸå.com`
- HTTPS: `https://ä½ çš„åŸŸå.com`

**Token å®Œå…¨å®‰å…¨** âœ… å­˜å‚¨åœ¨ä½ çš„æœåŠ¡å™¨ä¸Šï¼Œä¸ä¼šæš´éœ²ï¼

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [ç«¯å£é€‰æ‹©è¯´æ˜](ç«¯å£é€‰æ‹©è¯´æ˜.md) - ç«¯å£é€‰æ‹©çš„è¯¦ç»†è¯´æ˜
- [Docker å®˜æ–¹æ–‡æ¡£](https://docs.docker.com/)
- [PM2 å®˜æ–¹æ–‡æ¡£](https://pm2.keymetrics.io/)
- [Nginx å®˜æ–¹æ–‡æ¡£](https://nginx.org/en/docs/)
- [Let's Encrypt](https://letsencrypt.org/)

