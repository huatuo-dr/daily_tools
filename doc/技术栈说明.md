# 日常工具集 - 技术栈说明 📚

## 概述

这是一个基于现代前端技术栈构建的日常工具集Web应用，采用模块化设计，提供开发工具、天气预报、日历黄历和新闻聚合等实用功能。

**工具总览**：
- 💻 Coding工具（计算器、字符串处理、JSON校验）
- 🌦️ 天气预报（48小时/15天）
- 📅 日历黄历（农历、节假日、黄历）
- 📰 新闻聚合（TrendRadar）

---

## 核心技术栈

### 1. 前端框架

#### React 18.3.1
- **选择理由**：
  - 成熟稳定的UI库，生态完善
  - 组件化开发，代码可维护性强
  - Hooks API简洁优雅，适合函数式编程
  - 虚拟DOM性能优异

- **使用的特性**：
  - 函数式组件 (Functional Components)
  - Hooks (`useState`, `useEffect`, `useMemo`)
  - JSX语法
  - 组件Props传递

---

### 2. 构建工具

#### Vite 6.0.1
- **选择理由**：
  - 极速的冷启动和热更新
  - 基于ES模块，开发体验优秀
  - 开箱即用的配置
  - 生产环境构建优化

- **配置项**：
  - React插件支持
  - 开发服务器端口：3000
  - 自动打开浏览器

---

### 3. 开发语言

#### JavaScript (ES6+)
- **使用的ES6+特性**：
  - 箭头函数
  - 解构赋值
  - 模板字符串
  - Promise/async-await
  - 扩展运算符
  - 模块化 (import/export)

---

### 4. 样式方案

#### 原生CSS
- **选择理由**：
  - 无额外依赖，加载性能最优
  - 原生CSS变量支持主题切换
  - 完全控制，无样式冲突
  - 支持响应式设计

- **组织方式**：
  - 组件级CSS文件（与组件同目录）
  - 全局样式（`index.css`）
  - CSS变量定义（`:root`）
  - 媒体查询实现响应式

- **特性使用**：
  - Flexbox布局
  - Grid布局
  - CSS渐变
  - CSS过渡和动画
  - 媒体查询
  - 伪类和伪元素

---

### 5. 状态管理

#### React Hooks
- **使用的Hooks**：
  - `useState`：组件局部状态
  - `useEffect`：副作用处理（数据加载）
  - `useMemo`：性能优化（计算结果缓存）

- **状态设计**：
  - 组件内部状态（天气数据、日历日期）
  - Props传递（父子组件通信）
  - 无需引入额外状态管理库（Redux/MobX）

---

### 6. 数据可视化

#### 原生SVG
- **应用场景**：
  - 48小时天气温度曲线图
  - 降雨概率曲线图
  - 双Y轴组合图表

- **优势**：
  - 无需第三方图表库
  - 完全自定义样式
  - 响应式缩放
  - 性能优秀

- **实现特点**：
  - 贝塞尔曲线平滑路径
  - SVG渐变和滤镜
  - 动态数据绑定
  - 交互式标签

---

### 7. 第三方库

#### lunar-javascript 1.7.2
- **用途**：农历转换、节气计算、黄历查询
- **功能**：
  - 公历转农历
  - 农历节日查询
  - 二十四节气计算
  - 天干地支计算
  - 黄历宜忌查询
  - 吉神凶煞查询
  - 冲煞、五行、胎神信息

- **选择理由**：
  - 准确可靠的算法
  - 支持1900-2100年范围
  - API简洁易用
  - 功能全面（农历+黄历）
  - 持续维护更新

---

### 8. 代码规范

#### ESLint 9.15.0
- **插件配置**：
  - `@eslint/js`：JavaScript规则
  - `eslint-plugin-react`：React规则
  - `eslint-plugin-react-hooks`：Hooks规则
  - `eslint-plugin-react-refresh`：热更新规则

- **规范要点**：
  - 组件必须为函数式组件
  - Hooks使用规范检查
  - JSX语法规范
  - 未使用变量警告

---

## 项目架构

### 目录结构

```
daily_tools/
├── src/
│   ├── components/          # 组件目录
│   │   ├── Sidebar/        # 侧边栏导航
│   │   │   ├── Sidebar.jsx
│   │   │   └── Sidebar.css
│   │   ├── Coding/         # 开发工具
│   │   │   ├── Coding.jsx
│   │   │   ├── Coding.css
│   │   │   ├── Calculator.jsx       # 计算器（标准+程序员）
│   │   │   ├── Calculator.css
│   │   │   ├── StringTools.jsx      # 字符串处理
│   │   │   ├── StringTools.css
│   │   │   ├── JsonValidator.jsx    # JSON校验
│   │   │   └── JsonValidator.css
│   │   ├── Weather/        # 天气工具
│   │   │   ├── Weather.jsx
│   │   │   ├── Weather.css
│   │   │   ├── HourlyForecast.jsx   # 48小时预报
│   │   │   └── HourlyForecast.css
│   │   ├── Calendar/       # 日历工具
│   │   │   ├── Calendar.jsx
│   │   │   ├── Calendar.css
│   │   │   ├── AlmanacPanel.jsx     # 黄历面板
│   │   │   └── AlmanacPanel.css
│   │   └── News/           # 新闻工具
│   │       ├── News.jsx
│   │       └── News.css
│   ├── utils/              # 工具函数
│   │   ├── mockData.js     # Mock天气数据
│   │   └── calendarUtils.js # 日历、农历、黄历工具函数
│   ├── App.jsx             # 根组件
│   ├── App.css             # 根样式
│   ├── main.jsx            # 入口文件
│   └── index.css           # 全局样式
├── doc/                    # 文档目录
│   └── 技术栈说明.md       # 技术详细说明
├── public/                 # 静态资源
├── index.html              # HTML模板
├── vite.config.js          # Vite配置
├── eslint.config.js        # ESLint配置
├── package.json            # 依赖配置
├── MILESTONES.md           # 开发里程碑
├── README.md               # 项目说明
└── .gitignore              # Git忽略配置
```

### 组件设计原则

1. **单一职责**：每个组件专注于一个功能
2. **可复用性**：组件接口设计考虑复用场景
3. **Props传递**：数据单向流动，父传子
4. **样式隔离**：每个组件独立的CSS文件
5. **横向Tab**：Coding工具内部使用横向Tab切换子功能

---

## 数据流设计

### Coding工具数据流

```
用户切换子Tab
    ↓
Coding组件 (useState: activeSubTab)
    ↓
渲染对应子工具组件
    ↓
Calculator/StringTools/JsonValidator
    ↓
本地计算处理，无需后端
```

### 天气工具数据流

```
用户输入城市
    ↓
Weather组件 (useState)
    ↓
调用getMockWeatherData()
    ↓
更新state (weatherData)
    ↓
重新渲染组件
    ↓
传递hourlyData到HourlyForecast子组件
```

### 日历工具数据流

```
用户切换月份/选择日期
    ↓
Calendar组件 (useState: currentDate, selectedDate)
    ↓
调用getCalendarData(year, month)
    ↓
调用getLunarInfo()获取农历
    ↓
渲染日历网格
    ↓
调用isHoliday()/isWorkday()标注
    ↓
传递selectedDate到AlmanacPanel
    ↓
显示黄历详情
```

### 新闻工具数据流

```
组件加载/用户点击刷新
    ↓
News组件 (useEffect/handleRefresh)
    ↓
fetch API获取GitHub HTML
    ↓
更新state (htmlContent)
    ↓
dangerouslySetInnerHTML渲染
    ↓
显示新闻内容
```

---

## 性能优化

### 已实现的优化

1. **useMemo缓存计算**
   - HourlyForecast组件中图表计算结果缓存
   - AlmanacPanel组件中黄历数据缓存
   - 避免每次渲染重复计算

2. **组件按需渲染**
   - 条件渲染减少无用DOM
   - 列表使用key优化
   - Tab切换时仅渲染当前工具

3. **CSS性能**
   - 使用transform代替position动画
   - GPU加速的CSS属性
   - 横向布局优化空间利用

4. **fetch优化**
   - 添加时间戳防止缓存
   - 错误处理和重试机制

### 待优化项

1. **代码分割**
   - React.lazy实现路由懒加载
   - 动态import减少初始加载

2. **缓存策略**
   - LocalStorage缓存城市历史
   - 天气数据缓存机制

---

## 响应式设计

### 断点策略

- **桌面端**：> 768px
- **移动端**：≤ 768px

### 适配方案

1. **布局切换**
   - 桌面：左右布局（Sidebar + Content）
   - 移动：上下布局（Sidebar顶部 + Content下方）

2. **字体缩放**
   - 移动端字体适当缩小
   - 保持可读性

3. **触摸优化**
   - 增大移动端可点击区域
   - 支持滑动操作

---

## 浏览器兼容性

### 目标浏览器

- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

### 使用的现代特性

- CSS Grid & Flexbox
- CSS变量
- ES6+ JavaScript
- SVG（图表绘制）
- Fetch API（数据获取）
- Clipboard API（复制功能）
- dangerouslySetInnerHTML（HTML渲染）
- CSS渐变和阴影

---

## 开发工具

### 推荐IDE

- **VS Code**
  - ESLint插件
  - Prettier插件
  - React代码片段

### 调试工具

- React Developer Tools
- Chrome DevTools
- Vite DevTools

---

## 核心功能实现亮点

### 1. 程序员计算器
- **进制转换**：支持HEX/DEC/OCT/BIN四种进制实时转换
- **位运算**：AND/OR/XOR/NOT/左移/右移完整支持
- **横向布局**：进制显示(400px) + 操作按钮并排，高效利用空间

### 2. 48小时天气曲线
- **SVG绘制**：原生SVG实现平滑曲线
- **双Y轴**：左侧温度，右侧降雨概率
- **横向滚动**：1小时间隔，48个数据点

### 3. 黄历系统
- **完整信息**：宜忌、冲煞、五行、胎神、吉凶神煞
- **交互选择**：点击日历日期查看对应黄历
- **节气高亮**：金色渐变标签，醒目显示

### 4. 新闻聚合
- **fetch方案**：绕过iframe的X-Frame-Options限制
- **实时更新**：支持手动刷新
- **完整渲染**：保留TrendRadar所有样式和功能

## 未来技术演进

### 短期计划

1. **TypeScript迁移**
   - 类型安全
   - 更好的IDE支持

2. **真实API接入**
   - 天气API（OpenWeatherMap）
   - Geolocation API

### 长期规划

1. **PWA支持**
   - Service Worker
   - 离线可用

2. **性能监控**
   - Web Vitals
   - 性能分析

3. **单元测试**
   - Jest + React Testing Library
   - 组件测试覆盖

4. **更多工具**
   - 番茄钟、备忘录
   - 颜色选择器、正则测试器

---

**文档版本**: 2.0  
**最后更新**: 2024-11-29  
**维护者**: 开发团队

